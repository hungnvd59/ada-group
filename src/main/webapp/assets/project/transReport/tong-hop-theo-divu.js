app.controller('partnerCtrl', ['$scope', '$http', '$timeout', '$q', function ($scope, $http, $timeout, $q) {    $scope.page = page;    $scope.listData = {items: "", rowCount: 0, numberPerPage: 15, pageNumber: 1, pageList: [], pageCount: 0};    $scope.itemType = "";    $scope.itemName = "";    $scope.msisdnContract = "";    $scope.userName = "";    $scope.fromDate = "";    $scope.toDate = "";    $scope.logs = [];    $scope.pageNumber = 1;    $("#fromDate").datetimepicker({        locale: 'vi-VN',        format: 'DD-MM-YYYY',        icons: {            time: "fa fa-clock-o",            date: "fa fa-calendar",            up: "fa fa-chevron-up",            down: "fa fa-chevron-down",            previous: 'fa fa-chevron-left',            next: 'fa fa-chevron-right',            today: 'fa fa-screenshot',            clear: 'fa fa-trash',            close: 'fa fa-remove'        }    }).on('dp.change', function (e) {        if (e != null) {            $scope.fromDate = $(this).val();        }    })    $("#toDate").datetimepicker({        locale: 'vi-VN',        format: 'DD-MM-YYYY',        icons: {            time: "fa fa-clock-o",            date: "fa fa-calendar",            up: "fa fa-chevron-up",            down: "fa fa-chevron-down",            previous: 'fa fa-chevron-left',            next: 'fa fa-chevron-right',            today: 'fa fa-screenshot',            clear: 'fa fa-trash',            close: 'fa fa-remove'        }    }).on('dp.change', function (e) {        if (e != null) {            $scope.toDate = $(this).val();        }    })    $(document).ready(function () {    });    $scope.totalRecord = 0;    $scope.totalAmount = 0;    $scope.totalOspValue = 0;    $scope.totalShareValue = 0;    $scope.search = function (pageNumber) {        $scope.totalRecord = 0;        $scope.totalAmount = 0;        $scope.totalOspValue = 0;        $scope.totalShareValue = 0;        $scope.listData.pageNumber = pageNumber;        $http.get(preUrl + "/transReport/searchByDivu", {            params: {                p: $scope.listData.pageNumber,                numberPerPage: $scope.listData.numberPerPage,                itemType: $scope.itemType,                msisdnContract: $scope.msisdnContract,                userName: $scope.userName,                fromDate: $scope.fromDate,                toDate: $scope.toDate            }        })            .then(function (response) {                if (response != null && response != 'undefined' && response.status == 200) {                    $scope.listData = response.data;                    $scope.listData.pageCount = getPageCount($scope.listData);                    $scope.listData.pageList = getPageList($scope.listData);                    $scope.listData.items.forEach((item) => {                        $scope.totalRecord = Number($scope.totalRecord) + Number(item.totalTransSuccess);                        $scope.totalAmount = Number($scope.totalAmount) + Number(item.totalAmount);                        $scope.totalOspValue = Number($scope.totalOspValue) + Number(item.ospValue);                        $scope.totalShareValue = Number($scope.totalShareValue) + Number(item.shareValue);                    });                    console.log("total-record: " + $scope.totalRecord);                    console.log("total-amount: " + $scope.totalAmount);                    console.log("total-ospvalue: " + $scope.totalOspValue);                    console.log("total-sharevalue: " + $scope.totalShareValue);                }            });    }    $scope.listProduct = "";    $scope.searchProduct = function (type) {        if (type == null || type == "") {            $scope.listProduct = "";        }        $http.get(preUrl + "/transReport/getProduct", {            params: {                itemType: type            }        })            .then(function (response) {                if (response != null && response != 'undefined' && response.status == 200) {                    $scope.listProduct = response.data;                }            });    }    $scope.clear = function () {        $scope.msisdnContract = "";        $scope.userName = "";        $scope.fromDate = "";        $scope.toDate = "";        $scope.itemType = "";        $scope.itemName = "";        $("#fromDate").val("");        $("#toDate").val("");        $("#itemType").select2("val", "");        $("#itemName").select2("val", "");    };    $scope.setNumberPerPage = function (numberPerPage) {        $scope.listData.pageNumber = 1;        $scope.listData.numberPerPage = numberPerPage;        $scope.search(1);    }    // -------------------------Init----------------------------    $scope.search(1);}]);